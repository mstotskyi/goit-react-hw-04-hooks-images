(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2lVHh",ImageGalleryItem__image:"ImageGalleryItem_ImageGalleryItem__image__1EWtl"}},11:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2dj5A",Modal:"Modal_Modal__3Ngtj"}},13:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3s90g"}},14:function(e,t,a){e.exports={Button:"Button_Button__2bEnA"}},16:function(e,t,a){e.exports={loader:"Loader_loader__3dQzJ"}},21:function(e,t,a){},22:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(8),c=a.n(s),o=(a(21),a(3)),i=a(4),l=a(6),h=a(5),u=(a(22),a(7)),m=a.n(u),d=a(0),p=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={searchQery:"",page:null},e.handleOnSubmit=function(t){t.preventDefault(),e.props.getSearchQuery(e.state.searchQery),e.setState({searchQery:""}),e.setState({page:1})},e.handleOnChange=function(t){return e.setState({searchQery:t.target.value})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(d.jsx)("header",{className:m.a.Searchbar,children:Object(d.jsxs)("form",{className:m.a.SearchForm,onSubmit:this.handleOnSubmit,children:[Object(d.jsx)("button",{type:"submit",className:m.a.SearchForm__button,children:Object(d.jsx)("span",{className:m.a.SearchForm__button__label,children:"Search"})}),Object(d.jsx)("input",{className:m.a.SearchForm__input,value:this.state.searchQery,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.handleOnChange})]})})}}]),a}(n.Component),b=a(12),g=a(13),j=a.n(g),y=function(){function e(){Object(o.a)(this,e),this.searchQuery="",this.page=1,this.hits=0}return Object(i.a)(e,[{key:"fetchPictures",value:function(){var e=this,t="".concat("https://pixabay.com/api/","?image_type=photo&orientation=horizontal&q=").concat(this.searchQuery,"&page=").concat(this.page,"&per_page=15&key=").concat("23134043-5454bb2c28435773c6d2778ec");return fetch(t).then((function(e){return e.json()})).then((function(t){return e.getHits(t.totalHits),t.hits}))}},{key:"incrementPage",value:function(){this.page+=1}},{key:"resetPage",value:function(){this.page=1}},{key:"getHits",value:function(e){this.hits=e}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}}]),e}(),f=a(10),_=a.n(f);function O(e){var t=e.photos,a=e.showModal;return t.length>0&&t.map((function(e){return Object(d.jsx)("li",{className:_.a.ImageGalleryItem,onClick:a,children:Object(d.jsx)("img",{src:e.webformatURL,alt:e.tags,"data-source":e.largeImageURL,className:_.a.ImageGalleryItem__image})},e.webformatURL)}))}var S=a(14),v=a.n(S);function x(e){var t=e.handleOnClick;return Object(d.jsx)("button",{type:"button",className:v.a.Button,onClick:t,children:"LoadMore"})}var w=a(11),I=a.n(w),k=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e.handleEscape=function(t){"Escape"===t.code&&e.props.togleModal()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleEscape)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleEscape)}},{key:"render",value:function(){return Object(s.createPortal)(Object(d.jsx)("div",{className:I.a.Overlay,onClick:this.props.togleModal,children:Object(d.jsx)("div",{className:I.a.Modal,children:Object(d.jsx)("img",{src:this.props.img.dataset.source,alt:this.props.img.alt})})}),document.getElementById("modalRoot"))}}]),a}(n.Component),Q=a(15),M=a.n(Q),F=(a(44),a(16)),C=a.n(F),N=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(d.jsx)(M.a,{type:"Watch",color:"#00BFFF",height:100,width:100,timeout:1e5,className:C.a.loader})}}]),a}(n.Component),E=new y,G=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={searchResults:[],status:"init",showModal:!1,modalImage:"",showSpiner:!1},e.handleOnClick=function(t){E.incrementPage(),e.togleSpiner(),E.fetchPictures().then((function(t){e.setState((function(e){return{searchResults:[].concat(Object(b.a)(e.searchResults),Object(b.a)(t)),status:"success"}})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),e.togleSpiner()})).catch((function(t){e.setState({status:"error"})}))},e.togleSpiner=function(){return e.setState({showSpiner:!e.state.showSpiner})},e.togleModal=function(){return e.setState({showModal:!e.state.showModal})},e.showModal=function(t){e.togleModal(),e.setState({modalImage:t.target})},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this;e.searchQuery!==this.props.searchQuery&&(this.setState({status:"pending"}),E.query=this.props.searchQuery,E.resetPage(),E.fetchPictures().then((function(e){return a.setState({searchResults:e,status:"success"})})).catch((function(e){a.setState({status:"error"})})))}},{key:"render",value:function(){return"init"===this.state.status?Object(d.jsx)("h1",{children:"Hallo! Search something!"}):"pending"===this.state.status?Object(d.jsx)(N,{}):"success"===this.state.status?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("ul",{className:j.a.ImageGallery,children:Object(d.jsx)(O,{photos:this.state.searchResults,showModal:this.showModal})}),this.state.showSpiner&&Object(d.jsx)(N,{}),Object(d.jsx)(x,{handleOnClick:this.handleOnClick}),this.state.showModal&&Object(d.jsx)(k,{togleModal:this.togleModal,img:this.state.modalImage})]}):void("error"===this.state.status&&alert("ERROR!!"))}}]),a}(n.Component),R=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:""},e.getSearchQuery=function(t){return e.setState({searchQuery:t})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(p,{getSearchQuery:this.getSearchQuery}),Object(d.jsx)(G,{searchQuery:this.state.searchQuery})]})}}]),a}(n.Component),P=R;c.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(P,{})}),document.getElementById("root"))},7:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__3E9Qg",SearchForm:"Searchbar_SearchForm__2ep31",SearchForm__button:"Searchbar_SearchForm__button__XkhLF",SearchForm__button__label:"Searchbar_SearchForm__button__label__6-bI7",SearchForm__input:"Searchbar_SearchForm__input__D9tQP"}}},[[45,1,2]]]);
//# sourceMappingURL=main.0385eb7f.chunk.js.map